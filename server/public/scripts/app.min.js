/*! duplexchicks 2016-04-27 */
var chickApp=angular.module("chickApp",["ngMaterial","ngMessages","ngRoute","googlechart"]);chickApp.config(["$routeProvider","$locationProvider",function(a,b){a.when("/admin",{templateUrl:"/views/admin.html",controller:"AdminController"}).when("/emailList",{templateUrl:"/views/partials/emailList.html",controller:"EmailController"}).when("/setVariables",{templateUrl:"/views/partials/setVariables.html",controller:"SetVariablesController"}).otherwise({redirectTo:"/emailList"})}]),chickApp.controller("AdminController",["$scope","$http","$window","ClientService","AdminService",function(a,b,c,d,e){a.toEmailList=function(){c.location.href="#emailList"},a.toDefaultValues=function(){c.location.href="#setVariables"}}]),chickApp.controller("EmailController",["$scope","$http","$window","ClientService","AdminService",function(a,b,c,d,e){}]),chickApp.controller("SetVariablesController",["$scope","$http","$window","ClientService","AdminService",function(a,b,c,d,e){a.setDefaultValues=function(){console.log("Submitting default values")}}]),chickApp.controller("InputController",["$scope","$log","$http","$window","ClientService",function(a,b,c,d,e){a.inputData={},a.inputData.monthlyRentPersonal=1500,a.inputData.monthlyRentTenant=1290,a.inputData.targetPrice=266e3,a.inputData.downPaymentPercentage=3,a.inputData.mortgageRate=4.25,a.inputData.yearsAmmoritized=500,a.inputData.income=100,a.inputData.mortgageYears=30,a.inputData.vacancy=5,a.inputData.propertyTaxPercentage=1.65,a.inputData.assocDues=0,a.inputData.management=0,a.inputData.misc=1e3,a.inputData.insuranceRate=1,a.inputData.utils=1e3,a.inputData.legalAccounting=100,a.inputData.taxBracket=28,a.inputData.repairValue=1400,a.inputData.years=5;a.$watchCollection("inputData",function(b,c){console.log("Changed",b,c),a.owedAfterDown=b.targetPrice*(1-b.downPaymentPercentage/100),a.mortgageRateDecimal=b.mortgageRate/100,a.mortgageRateDecimalMonthly=a.mortgageRateDecimal/12,a.monthlyBuyPre=a.owedAfterDown*a.mortgageRateDecimalMonthly*Math.pow(1+a.mortgageRateDecimalMonthly,12*b.mortgageYears)/(Math.pow(1+a.mortgageRateDecimalMonthly,12*b.mortgageYears)-1),a.annualBuyPre=12*a.monthlyBuyPre,a.propTax=b.targetPrice*b.propertyTaxPercentage/100,a.propInsurance=b.targetPrice*b.insuranceRate/100,a.firstYear=a.annualBuyPre+a.propTax+b.repairValue+b.assocDues+b.management+b.misc+a.propInsurance+b.utils+b.legalAccounting+b.targetPrice*b.downPaymentPercentage/100,a.otherYears=a.annualBuyPre+a.propTax+b.repairValue+b.assocDues+b.management+b.misc+a.propInsurance+b.utils+b.legalAccounting,a.buy[1].v=a.firstYear+a.otherYears*(b.years-1),a.rent[1].v=12*b.monthlyRentPersonal*b.years+b.utils,a.initialDuplex=a.buy[1].v,a.rentTenantAnnual=12*b.monthlyRentTenant*(1-b.vacancy/100),a.depPersProp=.05*b.targetPrice*.2,a.depBuildingValue=.5*b.targetPrice*.0348,a.depLandImprovVal=.05*b.targetPrice*.2,a.annualDebtService=a.annualBuyPre-a.owedAfterDown*a.mortgageRateDecimal,a.netOperatingIncome=a.rentTenantAnnual-a.propTax-a.propInsurance-b.repairValue-b.assocDues-b.management-b.misc-b.utils-b.legalAccounting,a.interestNet=a.owedAfterDown*a.mortgageRateDecimal*-1,a.depTot=a.depPersProp+a.depBuildingValue+a.depLandImprovVal,a.taxableIncome=a.netOperatingIncome+a.interestNet+a.depTot,a.incomeTaxPay=a.taxableIncome*b.taxBracket/100,a.buyAndRent[1].v=a.initialDuplex-a.rentTenantAnnual-a.depPersProp-a.depBuildingValue-a.depLandImprovVal}),a.myChartObject={},a.myChartObject.type="ColumnChart",a.buy=[{v:"Buy"},{v:a.outputData},{v:"red"}],a.rent=[{v:"Rent"},{v:200},{v:"green"}],a.buyAndRent=[{v:"Buy & Rent-out"},{v:600},{v:"purple"}],a.myChartObject.data={cols:[{id:"options",label:"Options",type:"string"},{id:"dollars",label:"Dollars",type:"number"},{role:"style",type:"string"}],rows:[{c:a.buy},{c:a.rent},{c:a.buyAndRent}]},a.myChartObject.options={title:"Buy vs Rent vs Buy & Rent-out",animation:{duration:3e3,easing:"out"}}}]),chickApp.factory("AdminService",["$http",function(a){var b=function(){a.get("/admin/defaults").then(function(a){d.defaults=a.data})},c=function(){a.get("/admin/contacts").then(function(a){d.contacts=a.data})},d={};return{admin:d,getDefaults:b,getContacts:c}}]),chickApp.factory("ClientService",["$http",function(a){var b={},c=function(){a.get("/defaults").then(function(a){b.defaults=a.data})},d=function(){a.post("/submit",data).then(function(a){})};return{client:b,getDefaults:c,submitEmail:d}}]);